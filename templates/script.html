{% load static %}

<script
  type="text/javascript"
  src="{% static 'vendor/jquery/jquery-3.2.1.min.js' %}"
></script>

<script
  type="text/javascript"
  src="{% static 'vendor/animsition/js/animsition.min.js' %}"
></script>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
  crossorigin="anonymous"
></script>
<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
  crossorigin="anonymous"
></script>

<script
  type="text/javascript"
  src="{% static 'vendor/select2/select2.min.js' %}"
></script>
<script type="text/javascript">
  $(".selection-1").select2({
    minimumResultsForSearch: 20,
    dropdownParent: $("#dropDownSelect1")
  });
</script>

<script
  type="text/javascript"
  src="{% static 'vendor/slick/slick.min.js' %}"
></script>
<script type="text/javascript" src="{% static 'js/slick-custom.js' %}"></script>

<script
  type="text/javascript"
  src="{% static 'vendor/countdowntime/countdowntime.js' %}"
></script>

<script
  type="text/javascript"
  src="{% static 'vendor/lightbox2/js/lightbox.min.js' %}"
></script>
<script crossorigin src="{% static 'js/react.development.js' %}"></script>
<script crossorigin src="{% static 'js/react-dom.development.js' %}"></script>

<script
  type="text/javascript"
  src="{% static 'vendor/sweetalert/sweetalert.min.js' %}"
></script>
<script type="text/javascript">
  $(".block2-btn-addcart").each(function() {
    var nameProduct = $(this)
      .parent()
      .parent()
      .parent()
      .find(".block2-name")
      .html();
    $(this).on("click", function() {
      swal(nameProduct, "is added to cart !", "success");
    });
  });
  $(".block2-btn-towishlist").each(function() {
    var nameProduct = $(this)
      .parent()
      .parent()
      .parent()
      .find(".block2-name")
      .html();
    $(this).on("click", function() {
      swal(nameProduct, "", "success");
    });
  });
</script>

<script src="{% static 'js/main.js' %}"></script>

{% block extra_scripts %}
<script>
	$(document).ready( function() {
		var menu = document.querySelector('.main_menu');
		var dropdownContent = document.querySelector('.dropdown-content');
		var dropdownButton = document.querySelector('.dropdown');
	
		function checkMenuItems() {
			var screenWidth = window.innerWidth; // الحصول على عرض الشاشة الحالي
			if (screenWidth > 992) { // تحقق فقط إذا كان العرض أكبر من 992 بكسل
				 // تفريغ محتوى القائمة المنسدلة في كل تحقق
				dropdownButton.style.display = 'none'; // إخفاء زر القائمة المنسدلة في البداية
				
				var totalWidth = 0;
				var menuWidth = menu.clientWidth; // عرض القائمة
				
				Array.from(menu.children).forEach(function(item) {
					item.style.display = 'inline-block'; // عرض العنصر بشكل افتراضي
					totalWidth += item.offsetWidth;
          //console.log(totalWidth)
          //console.log(menuWidth)
					if (totalWidth > menuWidth) {
            // console.log(item)
            var clonedItem = item.cloneNode(true);
						dropdownContent.appendChild(clonedItem); // نقل العنصر إلى القائمة المنسدلة
						item.style.display = 'none'; // إخفاء العنصر من القائمة الأساسية
						// menu.removeChild(item); // نقل العنصر إلى القائمة المنسدلة
						dropdownButton.style.display = 'block'; // عرض زر القائمة المنسدلة
						// console.log(dropdownButton)
					}
          
					else{
            
            console.log(dropdownContent.children);
            console.log(dropdownContent.children.length);
            
            var totalWidth_d = 0; 
            Array.from(dropdownContent.children).forEach(function(item_d) {
                console.log('dss');
                console.log(item_d);
              //item_d.style.display = 'inline-block'; // عرض العنصر بشكل افتراضي
					    totalWidth_d += item_d.offsetWidth;
              if(totalWidth_d < menuWidth){
                var clonedItem_d = item.cloneNode(true);
                menu.appendChild(clonedItem_d); // نقل العنصر إلى القائمة المنسدلة
                item_d.style.display = 'none'; // إخفاء العنصر من القائمة الأساسية
                // menu.removeChild(item); // نقل العنصر إلى القائمة المنسدلة
                //dropdownButton.style.display = 'block'; // عرض زر القائمة المنسدلة
              }
              else{
                console.log('d');
              }
            })
            // menu.appendChild(item); // نقل العنصر إلى القائمة المنسدلة
						//item.style.display = 'block'; // إخفاء العنصر من القائمة الأساسية
            //dropdownContent.removeChild(item); // نقل العنصر إلى القائمة المنسدلة
            // console.log('dddd');
            // dropdownButton.style.display = 'none'; // عرض زر القائمة المنسدلة
            
            
			
					}
				});
	
				
	
			} else {
				
	
				dropdownButton.style.display = 'none'; // إخفاء زر القائمة المنسدلة إذا كان العرض أقل من أو يساوي 992 بكسل
			}
		}
	
		// استدعاء الوظيفة عند تحميل الصفحة
		checkMenuItems();
	
		// استدعاء الوظيفة عند تغيير حجم النافذة
		window.addEventListener('resize', checkMenuItems);
	
		// إضافة حدث لعرض وإخفاء القائمة المنسدلة
		document.querySelector('.dropbtn').addEventListener('click', function() {
			dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
		});
	});

	
	</script>

{% endblock extra_scripts %}